import{_ as e,c as n,o as a,a as i}from"./app-FS3VdUqr.js";const o={},r=i(`<h1 id="building-and-running-qml-android-applications" tabindex="-1"><a class="header-anchor" href="#building-and-running-qml-android-applications"><span>Building and Running QML Android Applications</span></a></h1><h2 id="building-qml-android-applications" tabindex="-1"><a class="header-anchor" href="#building-qml-android-applications"><span>Building QML Android Applications</span></a></h2><p>Qt Creator uses Gradle for project building. Once your project code is ready, select the Android kit for building in Qt Creator. Click build, and Qt Creator will generate Gradle configuration files for you. However, you may encounter errors such as:</p><blockquote><p>Execution failed for task &#39;:processDebugResources&#39;. A failure occurred while executing com.android.build.gradle.internal.res.LinkApplicationAndroidResourcesTask$TaskAction Android resource linking failed aapt2 E 07-23 15:59:44 51907 51907 LoadedArsc.cpp:94] RES_TABLE_TYPE_TYPE entry offsets overlap actual entry data. aapt2 E 07-23 15:59:44 51907 51907 ApkAssets.cpp:149] Failed to load resources table in APK &#39;/home/zhy/Android/Sdk/platforms/android-35/android.jar&#39;.</p></blockquote><p>This is because the current Gradle plugin version does not support android-35. See <a href="https://stackoverflow.com/questions/54152209/how-to-fix-execution-failed-for-task-appprocessdebugresources-android-re" target="_blank" rel="noopener noreferrer">How to fix &quot;Execution failed for task &#39;:app:processDebugResources&#39;. &gt; Android resource linking failed&quot;[Android/Flutter] - Stack Overflow</a></p><p>To resolve this issue, you need to modify the Gradle configuration.</p><p>Navigate to the <code>/build/Qt_6_7_2_Clang_arm64_v8a-Debug/android-build</code> folder in your project.</p><p>Open the <code>build.gradle</code> file and locate the <code>dependencies</code> block:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">dependencies {</span>
<span class="line">        classpath &#39;com.android.tools.build:gradle:7.4.1&#39;</span>
<span class="line">    }</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>com.android.tools.build:gradle:7.4.1</code> refers to the Android Gradle Plugin (AGP). This default version is from 2022 and is quite outdated.</p><p>You can find the latest version here: <a href="https://mvnrepository.com/artifact/com.android.tools.build/gradle?repo=google" target="_blank" rel="noopener noreferrer">Maven Repository: com.android.tools.build » gradle</a></p><p>Update the plugin version to a newer one, for example:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">    dependencies {</span>
<span class="line">        classpath &#39;com.android.tools.build:gradle:8.4.1&#39;</span>
<span class="line">    }</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Additionally, when upgrading the plugin version, ensure compatibility with the <a href="https://gradle.org/releases/" target="_blank" rel="noopener noreferrer">Gradle version</a>.</p><p>Check the relationship between the Gradle and AGP versions here: <a href="https://developer.android.com/build/releases/gradle-plugin#updating-gradle" target="_blank" rel="noopener noreferrer">Android Gradle plugin 8.5 release notes | Android Studio | Android Developers</a></p><blockquote><p>Reference: <a href="https://stackoverflow.com/questions/70545646/could-not-find-com-android-tools-buildgradle7-3-3-error-found-in-build-gradle" target="_blank" rel="noopener noreferrer">Could not find com.android.tools.build:gradle:7.3.3. error found in build.gradle file - Stack Overflow</a></p></blockquote><p>Therefore, you should use at least Gradle version 8.6 to support this plugin.</p><p>Navigate to the <code>./gradle/wrapper</code> folder and open the <code>gradle-wrapper.properties</code> file. This file defines the Gradle version used by the project.</p><p>Find the line: <code>distributionUrl=https\\://services.gradle.org/distributions/gradle-8.3-bin.zip</code></p><p>Change it to:</p><p><code>distributionUrl=https\\://services.gradle.org/distributions/gradle-8.6-bin.zip</code></p><p>This update specifies that the project will use Gradle version 8.6.</p><p>After making these changes, click on build. It will automatically download the specified version of Gradle and then download the necessary Gradle plugins.</p><p>If successful, you can find the built APK at <code>./build/outputs/apk/debug</code>.</p><h2 id="running-and-installing-apk" tabindex="-1"><a class="header-anchor" href="#running-and-installing-apk"><span>Running and Installing APK</span></a></h2><p>In a Linux environment, you can use the adb command to install the APK on your Android device. Alternatively, you can use Qt Creator for one-click deployment.</p><p>After connecting your Android device via USB, use the adb command to install the APK:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">adb <span class="token function">install</span> android-build-debug.apk</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Make sure that your Android device has Developer Mode enabled. You can find specific instructions on how to enable Developer Mode based on your device model through an online search.</p><p>If you want to share the screen on your phone on PC, you can use scrcpy: <a href="https://github.com/Genymobile/scrcpy" target="_blank" rel="noopener noreferrer">Genymobile/scrcpy: Display and control your Android device</a></p>`,30),t=[r];function l(d,s){return a(),n("div",null,t)}const c=e(o,[["render",l],["__file","QML 安卓应用构建与运行.html.vue"]]),u=JSON.parse('{"path":"/posts/QML%20%E5%AE%89%E5%8D%93%E5%BA%94%E7%94%A8%E6%9E%84%E5%BB%BA%E4%B8%8E%E8%BF%90%E8%A1%8C.html","title":"Building and Running QML Android Applications","lang":"en-US","frontmatter":{"date":"2024-07-23T00:00:00.000Z","tag":["Android","QML"],"excerpt":"<p>About How to Build and Run QML Android Applications</p>","head":[["link",{"rel":"alternate","type":"application/atom+xml","href":"https://heeiya.github.io/KDEBlog/atom.xml","title":"Blog Atom Feed"}],["link",{"rel":"alternate","type":"application/json","href":"https://heeiya.github.io/KDEBlog/feed.json","title":"Blog JSON Feed"}],["link",{"rel":"alternate","type":"application/rss+xml","href":"https://heeiya.github.io/KDEBlog/rss.xml","title":"Blog RSS Feed"}]]},"headers":[{"level":2,"title":"Building QML Android Applications","slug":"building-qml-android-applications","link":"#building-qml-android-applications","children":[]},{"level":2,"title":"Running and Installing APK","slug":"running-and-installing-apk","link":"#running-and-installing-apk","children":[]}],"git":{"updatedTime":1724080500000,"contributors":[{"name":"hanyang zhang","email":"hanyangzhang@qq.com","commits":4}]},"filePathRelative":"posts/QML 安卓应用构建与运行.md"}');export{c as comp,u as data};
