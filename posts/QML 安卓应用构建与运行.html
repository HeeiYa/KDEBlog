<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.14" />
    <style>
      :root {
        --c-bg: #fff;
      }

      html.dark {
        --c-bg: #22272e;
      }

      html,
      body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia('(prefers-color-scheme: dark)').matches
      if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
        document.documentElement.classList.toggle('dark', true)
      }
    </script>
    <link rel="alternate" type="application/atom+xml" href="https://heeiya.github.io/KDEBlog/atom.xml" title="Blog Atom Feed"><link rel="alternate" type="application/json" href="https://heeiya.github.io/KDEBlog/feed.json" title="Blog JSON Feed"><link rel="alternate" type="application/rss+xml" href="https://heeiya.github.io/KDEBlog/rss.xml" title="Blog RSS Feed"><title>Building and Running QML Android Applications | Blog</title><meta name="description" content="A blog now mainly about my particpation in OSPP with KDE ">
    <link rel="preload" href="/KDEBlog/assets/style-Dfa-YeeG.css" as="style"><link rel="stylesheet" href="/KDEBlog/assets/style-Dfa-YeeG.css">
    <link rel="modulepreload" href="/KDEBlog/assets/app-FS3VdUqr.js"><link rel="modulepreload" href="/KDEBlog/assets/QML 安卓应用构建与运行.html-WXSXYVV2.js">
    <link rel="prefetch" href="/KDEBlog/assets/index.html-DU71mR6u.js" as="script"><link rel="prefetch" href="/KDEBlog/assets/2024OSPP KDE社区项目：Porting KDE Games to Android platform.html-BQp7XPmP.js" as="script"><link rel="prefetch" href="/KDEBlog/assets/2024OSPP KDE项目中期总结.html-SBALS85K.js" as="script"><link rel="prefetch" href="/KDEBlog/assets/2024OSPP KDE项目末期总结.html-CW3xz_wy.js" as="script"><link rel="prefetch" href="/KDEBlog/assets/关于我.html-BnuGNOOm.js" as="script"><link rel="prefetch" href="/KDEBlog/assets/index.html-dRaSm_GA.js" as="script"><link rel="prefetch" href="/KDEBlog/assets/2024OSPP KDE社区项目：Porting KDE Games to Android platform.html-FtLNLKz8.js" as="script"><link rel="prefetch" href="/KDEBlog/assets/2024OSPP KDE项目中期总结.html-BoHKeT4Y.js" as="script"><link rel="prefetch" href="/KDEBlog/assets/2024OSPP KDE项目末期总结.html-DJHl7IVV.js" as="script"><link rel="prefetch" href="/KDEBlog/assets/QML 安卓应用构建与运行.html-Crk8UKsv.js" as="script"><link rel="prefetch" href="/KDEBlog/assets/关于我.html-ChHSwdIc.js" as="script"><link rel="prefetch" href="/KDEBlog/assets/404.html-BR8BskV1.js" as="script"><link rel="prefetch" href="/KDEBlog/assets/index.html-BgRuw-wM.js" as="script"><link rel="prefetch" href="/KDEBlog/assets/index.html-CtxSLmAW.js" as="script"><link rel="prefetch" href="/KDEBlog/assets/index.html-B9OJonSE.js" as="script"><link rel="prefetch" href="/KDEBlog/assets/index.html-BB38ln7P.js" as="script"><link rel="prefetch" href="/KDEBlog/assets/index.html-T1ni99Pw.js" as="script"><link rel="prefetch" href="/KDEBlog/assets/index.html-DzFLlam1.js" as="script"><link rel="prefetch" href="/KDEBlog/assets/index.html-mQU_9AoN.js" as="script"><link rel="prefetch" href="/KDEBlog/assets/index.html-De9QK2ne.js" as="script"><link rel="prefetch" href="/KDEBlog/assets/index.html-BoyqMrPl.js" as="script"><link rel="prefetch" href="/KDEBlog/assets/index.html-aQsiNiFJ.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon"><!--[--><header class="vp-navbar"><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/KDEBlog/"><img class="vp-site-logo" src="https://avatars.githubusercontent.com/u/90752469?s=400&amp;u=69796f3c09ffaa19d5dc128699599458dadb5d14&amp;v=4" alt="Blog"><span class="vp-site-name vp-hide-mobile" aria-hidden="true">Blog</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/KDEBlog/" aria-label="Home"><!---->Home<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/KDEBlog/article/" aria-label="Article"><!---->Article<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/KDEBlog/timeline/" aria-label="TimeLine"><!---->TimeLine<!----></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/KDEBlog/posts/QML%20%E5%AE%89%E5%8D%93%E5%BA%94%E7%94%A8%E6%9E%84%E5%BB%BA%E4%B8%8E%E8%BF%90%E8%A1%8C.html" aria-label="English"><!---->English<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/KDEBlog/zh/posts/QML%20%E5%AE%89%E5%8D%93%E5%BA%94%E7%94%A8%E6%9E%84%E5%BB%BA%E4%B8%8E%E8%BF%90%E8%A1%8C.html" aria-label="简体中文"><!---->简体中文<!----></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style="display:none;"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style=""><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar"><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/KDEBlog/" aria-label="Home"><!---->Home<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/KDEBlog/article/" aria-label="Article"><!---->Article<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/KDEBlog/timeline/" aria-label="TimeLine"><!---->TimeLine<!----></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/KDEBlog/posts/QML%20%E5%AE%89%E5%8D%93%E5%BA%94%E7%94%A8%E6%9E%84%E5%BB%BA%E4%B8%8E%E8%BF%90%E8%A1%8C.html" aria-label="English"><!---->English<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/KDEBlog/zh/posts/QML%20%E5%AE%89%E5%8D%93%E5%BA%94%E7%94%A8%E6%9E%84%E5%BB%BA%E4%B8%8E%E8%BF%90%E8%A1%8C.html" aria-label="简体中文"><!---->简体中文<!----></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">Building and Running QML Android Applications <!----></p><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="building-and-running-qml-android-applications" tabindex="-1"><a class="header-anchor" href="#building-and-running-qml-android-applications"><span>Building and Running QML Android Applications</span></a></h1><h2 id="building-qml-android-applications" tabindex="-1"><a class="header-anchor" href="#building-qml-android-applications"><span>Building QML Android Applications</span></a></h2><p>Qt Creator uses Gradle for project building. Once your project code is ready, select the Android kit for building in Qt Creator. Click build, and Qt Creator will generate Gradle configuration files for you. However, you may encounter errors such as:</p><blockquote><p>Execution failed for task &#39;:processDebugResources&#39;. A failure occurred while executing com.android.build.gradle.internal.res.LinkApplicationAndroidResourcesTask$TaskAction Android resource linking failed aapt2 E 07-23 15:59:44 51907 51907 LoadedArsc.cpp:94] RES_TABLE_TYPE_TYPE entry offsets overlap actual entry data. aapt2 E 07-23 15:59:44 51907 51907 ApkAssets.cpp:149] Failed to load resources table in APK &#39;/home/zhy/Android/Sdk/platforms/android-35/android.jar&#39;.</p></blockquote><p>This is because the current Gradle plugin version does not support android-35. See <a href="https://stackoverflow.com/questions/54152209/how-to-fix-execution-failed-for-task-appprocessdebugresources-android-re" target="_blank" rel="noopener noreferrer">How to fix &quot;Execution failed for task &#39;:app:processDebugResources&#39;. &gt; Android resource linking failed&quot;[Android/Flutter] - Stack Overflow</a></p><p>To resolve this issue, you need to modify the Gradle configuration.</p><p>Navigate to the <code>/build/Qt_6_7_2_Clang_arm64_v8a-Debug/android-build</code> folder in your project.</p><p>Open the <code>build.gradle</code> file and locate the <code>dependencies</code> block:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">dependencies {</span>
<span class="line">        classpath &#39;com.android.tools.build:gradle:7.4.1&#39;</span>
<span class="line">    }</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>com.android.tools.build:gradle:7.4.1</code> refers to the Android Gradle Plugin (AGP). This default version is from 2022 and is quite outdated.</p><p>You can find the latest version here: <a href="https://mvnrepository.com/artifact/com.android.tools.build/gradle?repo=google" target="_blank" rel="noopener noreferrer">Maven Repository: com.android.tools.build » gradle</a></p><p>Update the plugin version to a newer one, for example:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">    dependencies {</span>
<span class="line">        classpath &#39;com.android.tools.build:gradle:8.4.1&#39;</span>
<span class="line">    }</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Additionally, when upgrading the plugin version, ensure compatibility with the <a href="https://gradle.org/releases/" target="_blank" rel="noopener noreferrer">Gradle version</a>.</p><p>Check the relationship between the Gradle and AGP versions here: <a href="https://developer.android.com/build/releases/gradle-plugin#updating-gradle" target="_blank" rel="noopener noreferrer">Android Gradle plugin 8.5 release notes | Android Studio | Android Developers</a></p><blockquote><p>Reference: <a href="https://stackoverflow.com/questions/70545646/could-not-find-com-android-tools-buildgradle7-3-3-error-found-in-build-gradle" target="_blank" rel="noopener noreferrer">Could not find com.android.tools.build:gradle:7.3.3. error found in build.gradle file - Stack Overflow</a></p></blockquote><p>Therefore, you should use at least Gradle version 8.6 to support this plugin.</p><p>Navigate to the <code>./gradle/wrapper</code> folder and open the <code>gradle-wrapper.properties</code> file. This file defines the Gradle version used by the project.</p><p>Find the line: <code>distributionUrl=https\://services.gradle.org/distributions/gradle-8.3-bin.zip</code></p><p>Change it to:</p><p><code>distributionUrl=https\://services.gradle.org/distributions/gradle-8.6-bin.zip</code></p><p>This update specifies that the project will use Gradle version 8.6.</p><p>After making these changes, click on build. It will automatically download the specified version of Gradle and then download the necessary Gradle plugins.</p><p>If successful, you can find the built APK at <code>./build/outputs/apk/debug</code>.</p><h2 id="running-and-installing-apk" tabindex="-1"><a class="header-anchor" href="#running-and-installing-apk"><span>Running and Installing APK</span></a></h2><p>In a Linux environment, you can use the adb command to install the APK on your Android device. Alternatively, you can use Qt Creator for one-click deployment.</p><p>After connecting your Android device via USB, use the adb command to install the APK:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">adb <span class="token function">install</span> android-build-debug.apk</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Make sure that your Android device has Developer Mode enabled. You can find specific instructions on how to enable Developer Mode based on your device model through an online search.</p><p>If you want to share the screen on your phone on PC, you can use scrcpy: <a href="https://github.com/Genymobile/scrcpy" target="_blank" rel="noopener noreferrer">Genymobile/scrcpy: Display and control your Android device</a></p></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: hanyangzhang@qq.com">hanyang zhang</span><!----><!--]--><!--]--></span></div></div></footer><!----><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/KDEBlog/assets/app-FS3VdUqr.js" defer></script>
  </body>
</html>
